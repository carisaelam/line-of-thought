<section class="section">
  <%= render @post %>
  
  <div class="container is-flex is-justify-content-center	">
    
    <% if current_user == @post.user %>
    <p><%= link_to "Edit this post", edit_post_path(@post) %>|</p>

    <p><%= link_to "Delete", url_for(action: :destroy), data: {turbo_method: :delete, turbo_confirm: "Are you sure? "} %>|</p>

    <% end %>
  
    <p><%= link_to "Back to posts", posts_path %> </p>
  
  </div>


  <div class="section">
    <h2 class="title is-4">Comments</h2>
    <div class="box">
      <% if @post.comments.present? %>
        <% @post.comments.each do |comment| %>
          <% if comment.user %>
    
          <article class="media">
            <figure class="media-left">
              <p class="image is-64x64">
                <%= image_tag comment.user.avatar_url, class: 'avatar__image--comment' %>
              </p>
            </figure>
            <div class="media-content">
              <div class="content">
                <p>
                  <strong><%= comment.user.full_name%></strong> <small><%= time_ago_in_words(comment.created_at) %></small>
                  <br />
                  <%= comment.body %>
                </p>
              </div>
    
            </div>
          </article>
          <% end %>
        <% end %>
      <% else %>
        <p>No comments yet. Be the first to comment!</p>
      <% end %>
    </div>
  </div>



<%# Comment Section %>
  <div>
    <% if @post && @comment %>
      <%= form_with model: [@post, @comment], local: true do |form| %>

        <%= form.label :body, hidden: true %>
        <%= form.text_area :body, class: "textarea mb-1 p-3", rows: "2"  %>

        <%= form.submit "Add Comment" %>
      <% end %>
    <% else %>
      <p>Post or comment not available.</p>
    <% end %>
  </div>



</section>
